# ADR-001 — Technical Stack Decision

**Status:** Accepted
**Date:** 2026-02-11
**Context:** PromptVault — MVP

---

## Context

PromptVault is a platform for publishing and automated evaluation of prompts, built by AI agents with traceability via Entire Checkpoints.

For the MVP, the priority is delivery speed, operational simplicity, and alignment with the AI agent ecosystem. The stack needs to support both the user API and the prompt evaluation agent (LangGraph) in a single runtime.

A polyglot approach (Java for API + Python for agents) was considered and reserved for future evolution post-MVP.

---

## Decision

### Backend: Python + FastAPI

- **Framework:** FastAPI
- **Justification:**
  - Native async, high performance for I/O-bound tasks (LLM calls).
  - Strong typing via Pydantic — integrated validation and serialization.
  - Automatic documentation (OpenAPI/Swagger) without additional configuration.
  - Direct integration with LangGraph/LangChain in the same process, eliminating the need for inter-service communication.

### Evaluation Agent: LangGraph

- **Framework:** LangGraph (LangChain ecosystem)
- **Justification:**
  - Benchmark framework for agent orchestration with state graphs.
  - Native support for cycles, checkpoints, and state recovery.
  - Compatible with multiple LLM providers (Anthropic, OpenAI, etc.).
  - Observability via LangSmith for debugging and tracing executions.
- **MVP Integration:** Runs in the same FastAPI process as an async call. Extractable to a separate worker when necessary.

### Frontend: React + TypeScript

- **Build tool:** Vite
- **Styling:** Tailwind CSS
- **Justification:**
  - Mature ecosystem, wide availability of components.
  - TypeScript ensures type safety in the presentation layer.
  - Vite offers fast HMR and optimized builds.
  - Tailwind accelerates prototyping without custom CSS.

### Database: PostgreSQL

- **ORM:** SQLModel (SQLAlchemy + Pydantic)
- **Justification:**
  - PostgreSQL supports JSONB natively — useful for storing structured agent outputs (scores, criterion-based feedback).
  - SQLModel unifies database models and API schemas into a single definition, reducing boilerplate.
  - Migrations via Alembic.

---

## Project Structure (initial proposal)

```
promptvault/
├── backend/
│   ├── app/
│   │   ├── api/            # FastAPI Routes
│   │   ├── models/         # SQLModel (database + schemas)
│   │   ├── services/       # Business logic
│   │   ├── agents/         # LangGraph — evaluation agent
│   │   ├── core/           # Config, security, dependencies
│   │   └── main.py         # Entrypoint
│   ├── alembic/            # Database migrations
│   ├── tests/
│   ├── pyproject.toml
│   └── .env
├── frontend/
│   ├── src/
│   │   ├── components/
│   │   ├── pages/
│   │   ├── services/       # API calls
│   │   ├── hooks/
│   │   └── App.tsx
│   ├── package.json
│   └── vite.config.ts
├── docs/
│   └── adr/                # Architecture Decision Records
└── README.md
```

---

## Alternative Considered: Java (API) + Python (Agents)

- **Pros:** Leverages Java expertise, natural separation of concerns, each service scales independently.
- **Cons:** Two runtimes, inter-service communication (REST or queue), duplicate deployment pipeline, high operational complexity for MVP.
- **Decision:** Reserved for post-MVP evolution. The Python code architecture already plans for a clear separation between the API layer and agents, facilitating future extraction of the backend to Java.

---

## Evolution Path

1. **MVP:** Python Monolith (FastAPI + LangGraph + PostgreSQL) + React.
2. **Post-MVP (optional):** Extract agent to an asynchronous worker (Celery or dedicated queue).
3. **Future (optional):** Migrate API layer to Java/Spring Boot, keeping Python service only for agent orchestration.

---

## Main Dependencies

| Layer     | Technology         | Minimum Version |
|-----------|---------------------|---------------|
| Backend   | Python              | 3.12+         |
| Backend   | FastAPI             | 0.115+        |
| Backend   | SQLModel            | 0.0.22+       |
| Backend   | LangGraph           | 0.2+          |
| Backend   | Alembic             | 1.14+         |
| Database  | PostgreSQL          | 16+           |
| Frontend  | React               | 19+           |
| Frontend  | TypeScript          | 5.5+          |
| Frontend  | Vite                | 6+            |
| Frontend  | Tailwind CSS        | 4+            |